const $event = {
    "creationTime": 1685101969730,
    "customFields": [{
        "indexedValue": ["EDD_N/A"],
        "fieldKey": "EDD",
        "multiple": false,
        "description": "",
        "remark": "",
        "uuid": null,
        "required": false,
        "accessType": null,
        "input": "string",
        "unit": "",
        "valueType": "string",
        "options": [],
        "fieldType": "text",
        "value": "N/A",
        "isRemark": false
    }, {
        "indexedValue": ["Pickup Date_5/26/2023, 5:22:49 PM"],
        "fieldKey": "Pickup Date",
        "multiple": false,
        "description": "",
        "remark": "",
        "uuid": null,
        "required": false,
        "accessType": null,
        "input": "string",
        "unit": "",
        "valueType": "string",
        "options": [],
        "fieldType": "text",
        "value": "5/26/2023, 5:22:49 PM",
        "isRemark": false
    }, {
        "indexedValue": ["Shipment Date_5/26/2023, 5:22:12 PM"],
        "fieldKey": "Shipment Date",
        "multiple": false,
        "description": "",
        "remark": "",
        "uuid": null,
        "required": false,
        "accessType": null,
        "input": "string",
        "unit": "",
        "valueType": "string",
        "options": [],
        "fieldType": "text",
        "value": "5/26/2023, 5:22:12 PM",
        "isRemark": false
    }, {
        "indexedValue": ["Device Submitted_NO"],
        "fieldKey": "Device Submitted",
        "multiple": false,
        "description": "Device Submitted?",
        "remark": "",
        "uuid": "f23b53b4-6431-4239-80af-6a16a6a5629f",
        "required": false,
        "accessType": null,
        "input": "",
        "unit": "",
        "valueType": "string",
        "options": ["Yes", "No"],
        "fieldType": "yes-no",
        "value": "NO",
        "isRemark": false
    }, {
        "indexedValue": ["Device Submit Date_null"],
        "fieldKey": "Device Submit Date",
        "multiple": true,
        "description": "Device Submit Date",
        "remark": "",
        "uuid": "378509c4-97f3-4c3f-a312-4f03ece7e1d5",
        "required": false,
        "accessType": null,
        "input": "date",
        "unit": "",
        "valueType": "string",
        "options": [],
        "fieldType": "dateTime",
        "value": null,
        "isRemark": false
    }],
    "transportationMode": "ByRoad",
    "freightUnitLineItemId": null,
    "lastSyncUpTime": 1685101983041,
    "updates": {
        "traceID": "b24b2786-09cc-408d-9c66-c683e1b4f0d5",
        "resourceId": "0671f58d-55de-43bc-b48d-d82579c7e49f",
        "updatedBy": "USER",
        "changes": null,
        "sourceOfInformation": null,
        "description": null,
        "forwardReasons": ["shipment.lbs.added"],
        "userId": "c6b0da09-9552-483d-bdaa-7ed7c02087a0",
        "uuid": "fe794c47-565a-45b8-905a-138c52617fa3",
        "revision": 20,
        "time": 1685102268661,
        "forwardedFrom": null,
        "resourceType": "ShipmentObject",
        "updateType": null
    },
    "isActive": true,
    "uuid": "0671f58d-55de-43bc-b48d-d82579c7e49f",
    "issues": null,
    "branch": null,
    "orgId": "495b8728-c761-4fa7-83fe-db75a7d63221",
    "shipmentType": "DirectLeg",
    "completionTime": null,
    "routeId": null,
    "shipmentTrackingStatus": "Enroute For Delivery",
    "lastForwardTime": 1685102268691,
    "runningStatus": null,
    "delayTrackingStatus": "UP TO DATE",
    "delayReasonLastUpdateTime": null,
    "links": null,
    "shipmentDate": 1685101932900,
    "delayReason": null,
    "shipmentNumber": "FRETSH000000418",
    "originalEdd": null,
    "edd": null,
    "delayReasonUpdateExpiryTime": null,
    "externalShipmentId": null,
    "fleetInfo": {
        "isTrackingEnable": null,
        "forwardingAgent": {
            "geoFence": null,
            "documents": null,
            "customFields": null,
            "isPortalEnabled": false,
            "type": "vendor",
            "updates": null,
            "uuid": "928a78b7-6063-4b2f-81fe-2dd315540247",
            "orgId": null,
            "firmType": null,
            "gstn": "123456789009876",
            "voterId": null,
            "verificationTicketId": null,
            "group": {
                "name": "lorryOwner",
                "partnerType": null,
                "uuid": null,
                "orgId": null
            },
            "address": "{\"address\":\",rajan store,Undefined Minor Road,Karunagappally,Kollam,Kerala,690574,India,in\",\"city\":null,\"state\":null,\"pincode\":null}",
            "verificationStatus": null,
            "externalId": null,
            "panNumber": "CCBPJ7538R",
            "aadharNo": null,
            "parentId": null,
            "places": null,
            "route": null,
            "name": "karan mishra ",
            "location": null,
            "fretronId": null,
            "contacts": [{
                "emails": [""],
                "address": null,
                "mobileNumbers": [],
                "mobileNumber": null,
                "name": "karan mishra ",
                "type": null
            }],
            "status": "ACTIVE"
        },
        "verificationStatus": null,
        "trackingMode": "VTS-LBS",
        "broker": null,
        "uuid": null,
        "orgId": null,
        "vehicle": {
            "vtsDeviceId": null,
            "kmDriven": null,
            "secondaryDriverId": null,
            "attachedDocs": [],
            "customFields": [],
            "floorType": null,
            "description": null,
            "source": "FRETRON",
            "isTrackingEnabled": false,
            "updates": null,
            "uuid": null,
            "branch": null,
            "orgId": null,
            "vehicleLoadType": null,
            "associatedWith": null,
            "isDeleted": null,
            "customerId": null,
            "vehicleModel": null,
            "mileageEmpty": null,
            "mileageLoaded": null,
            "vehicleType": null,
            "groups": null,
            "externalId": null,
            "updateTime": null,
            "sharedWith": [],
            "baseLocationId": null,
            "vehicleMake": null,
            "vehicleRegistrationNumber": "testVeh--1",
            "chassisNumber": null,
            "driverId": null,
            "createTime": null,
            "loadCapacity": null,
            "truckLength": null,
            "category": null,
            "groupsExtended": null
        },
        "driver": null,
        "fleetType": "Owned",
        "fleetOwner": null,
        "trainInfo": null,
        "lbsNumber": "9499424304",
        "secondaryDriver": null,
        "device": {
            "branchId": null,
            "isSuspended": null,
            "mobileNumber": null,
            "manufacturerName": null,
            "groups": null,
            "attachedResourceNumber": null,
            "externalId": null,
            "updateTime": null,
            "isAssociated": null,
            "sharedWith": null,
            "type": "lbs",
            "updates": null,
            "uuid": null,
            "orgId": "495b8728-c761-4fa7-83fe-db75a7d63221",
            "attachedResourceId": null,
            "isDeleted": null,
            "createTime": null,
            "serviceProvider": null,
            "imei": "9499424304",
            "usedBy": null,
            "status": "PENDING"
        },
        "status": null
    },
    "syncUpDueTime": 1685133000000,
    "billingStatus": null,
    "currentLocation": null,
    "alerts": [],
    "equipments": null,
    "tripType": "Shipment",
    "lastDelayCalculationTime": null,
    "delayReasonUpdateDueTime": null,
    "locationTrackingStatus": "UP TO DATE",
    "poLineItemId": null,
    "consignments": [],
    "customContacts": null,
    "shipmentStages": [{
        "departureTime": 1685101982973,
        "gateInTime": null,
        "actualActivityStartTime": 1685101982973,
        "actualActivityEndTime": 1685101982973,
        "uuid": "dcc10287-20aa-4c3e-b47f-b79e58330955",
        "consignmentDelivered": null,
        "resourceDropOff": null,
        "resourcePickup": null,
        "eta": null,
        "stageName": null,
        "hub": {
            "hubId": null,
            "boundary": [
                [
                    [88.34789752176592, 22.65243638779603],
                    [88.34789567679424, 22.652450538712767],
                    [88.34791697783123, 22.652445048466554],
                    [88.34791639079478, 22.652444971139165],
                    [88.34789752176592, 22.65243638779603]
                ]
            ],
            "address": null,
            "accessibility": "private",
            "addedBy": "495b8728-c761-4fa7-83fe-db75a7d63221",
            "center": {
                "latitude": 22.652442666782107,
                "longitude": 88.34790481779042
            },
            "suggestedRadius": 0,
            "isOwned": null,
            "centerCoordinates": [88.34790481779042, 22.652442666782107],
            "placeId": "1af6e903-7642-4d68-9ea2-22268f210b56",
            "geoJsonBoundry": null,
            "externalId": null,
            "source": "GOOGLE",
            "places": [{
                "hubId": "1af6e903-7642-4d68-9ea2-22268f210b56",
                "boundary": null,
                "address": ",Bally Ghat,Grand Trunk Road,Bally Jagachha,Howrah,West Bengal,712258,India,in",
                "accessibility": "public",
                "addedBy": "495b8728-c761-4fa7-83fe-db75a7d63221",
                "center": {
                    "latitude": 22.652442,
                    "longitude": 88.3479045
                },
                "suggestedRadius": 0,
                "isOwned": false,
                "centerCoordinates": [88.3479045, 22.652442],
                "placeId": "5f2b852b-5447-4b78-b1fa-7de1e10f3054",
                "geoJsonBoundry": {
                    "coordinates": [
                        [
                            [88.34789324906794, 22.652446480767384],
                            [88.34791043703918, 22.65244756345643],
                            [88.3479052387259, 22.652436504560757],
                            [88.34789324906794, 22.652446480767384]
                        ]
                    ],
                    "type": "Polygon"
                },
                "externalId": null,
                "source": "FRETRON",
                "places": null,
                "viewport": null,
                "district": null,
                "name": "gt road",
                "state": null,
                "category": "Unloading Point",
                "subDistrict": null,
                "controllingBranchId": null
            }],
            "viewport": null,
            "district": "bally",
            "name": "Bally",
            "state": "west bengal",
            "category": "Hub",
            "subDistrict": null,
            "controllingBranchId": null
        },
        "arrivalTime": 1685101979541,
        "expectedActivityStartTime": null,
        "secondaryStatus": "WaitingForFinalize",
        "consignmentPickUps": null,
        "tripPoint": {
            "outOfTrackSince": null,
            "creationTime": null,
            "purpose": "Pickup",
            "plannedArrival": null,
            "currentGpsState": null,
            "updates": null,
            "uuid": null,
            "sequenceId": null,
            "isDisconnected": false,
            "isOutOfTrack": false,
            "routeDeviationMinimumDistanceConstraint": null,
            "eta": null,
            "routeId": null,
            "expectedActivityStartTime": null,
            "actualDeparture": 1685101982973,
            "vehicleId": null,
            "place": null,
            "remainingDistance": null,
            "actualActivityStartTime": null,
            "forShipmentStages": ["dcc10287-20aa-4c3e-b47f-b79e58330955"],
            "actualActivityEndTime": null,
            "actualArrival": 1685101979541,
            "purposedDistance": null,
            "plannedDeparture": null,
            "currentLocation": null,
            "isAutoCompleted": false,
            "coveredDistance": null,
            "hub": {
                "hubId": null,
                "boundary": null,
                "address": null,
                "accessibility": "private",
                "addedBy": "495b8728-c761-4fa7-83fe-db75a7d63221",
                "center": {
                    "latitude": 22.652442666782107,
                    "longitude": 88.34790481779042
                },
                "suggestedRadius": 0,
                "isOwned": null,
                "centerCoordinates": [88.34790481779042, 22.652442666782107],
                "placeId": "1af6e903-7642-4d68-9ea2-22268f210b56",
                "geoJsonBoundry": null,
                "externalId": null,
                "source": "GOOGLE",
                "places": null,
                "viewport": null,
                "district": "bally",
                "name": "Bally",
                "state": "west bengal",
                "category": "Hub",
                "subDistrict": null,
                "controllingBranchId": null
            },
            "imei": null,
            "assosiatedShipmentsId": ["0671f58d-55de-43bc-b48d-d82579c7e49f"],
            "status": "COMPLETED"
        },
        "place": null,
        "controllingBranchId": null,
        "gateOutTime": null,
        "status": "COMPLETED"
    }, {
        "departureTime": null,
        "gateInTime": null,
        "actualActivityStartTime": null,
        "actualActivityEndTime": null,
        "uuid": "08a12a58-8dcb-41ad-852b-8fe74d405489",
        "consignmentDelivered": null,
        "resourceDropOff": null,
        "resourcePickup": null,
        "eta": null,
        "stageName": null,
        "hub": {
            "hubId": null,
            "boundary": [
                [
                    [77.71416598607003, 13.023347228070612],
                    [77.71561515086535, 13.023503900045272],
                    [77.71498181217703, 13.021529825923102],
                    [77.71416598607003, 13.023347228070612]
                ]
            ],
            "address": null,
            "accessibility": "private",
            "addedBy": "495b8728-c761-4fa7-83fe-db75a7d63221",
            "center": {
                "latitude": 13.0229320455274,
                "longitude": 77.71473223379562
            },
            "suggestedRadius": 0,
            "isOwned": null,
            "centerCoordinates": [77.71473223379562, 13.0229320455274],
            "placeId": "d1058b8d-00ad-4914-a4c7-e6fd11498f9b",
            "geoJsonBoundry": null,
            "externalId": null,
            "source": "GOOGLE",
            "places": [{
                "hubId": "d1058b8d-00ad-4914-a4c7-e6fd11498f9b",
                "boundary": null,
                "address": "Old Madras Rd, Thambu Chetty Palya, Krishnarajapura, Bengaluru, Karnataka 560049, India",
                "accessibility": "public",
                "addedBy": "495b8728-c761-4fa7-83fe-db75a7d63221",
                "center": {
                    "latitude": 13.022664,
                    "longitude": 77.714852
                },
                "suggestedRadius": 0,
                "isOwned": false,
                "centerCoordinates": [77.714852, 13.022664],
                "placeId": "8ba8b9d0-26bf-407f-9ced-c5642eebee6b",
                "geoJsonBoundry": {
                    "coordinates": [
                        [
                            [77.71459392087387, 13.023335438329987],
                            [77.71564028716975, 13.023439981667213],
                            [77.71473880236098, 13.021720238163407],
                            [77.71459392087387, 13.023335438329987]
                        ]
                    ],
                    "type": "Polygon"
                },
                "externalId": null,
                "source": "FRETRON",
                "places": null,
                "viewport": null,
                "district": null,
                "name": "k r puram",
                "state": null,
                "category": "Others",
                "subDistrict": null,
                "controllingBranchId": null
            }],
            "viewport": null,
            "district": "Bangalore Urban",
            "name": "K R Puram",
            "state": "Karnataka",
            "category": "Hub",
            "subDistrict": null,
            "controllingBranchId": null
        },
        "arrivalTime": null,
        "expectedActivityStartTime": null,
        "secondaryStatus": null,
        "consignmentPickUps": null,
        "tripPoint": {
            "outOfTrackSince": null,
            "creationTime": 1685102047912,
            "purpose": "Delivery",
            "plannedArrival": null,
            "currentGpsState": null,
            "updates": {
                "traceID": "9797cf2b-5c42-4c6f-b259-7cab34d741fb",
                "resourceId": "08a12a58-8dcb-41ad-852b-8fe74d405489",
                "updatedBy": "SYSTEM",
                "changes": null,
                "sourceOfInformation": null,
                "description": null,
                "forwardReasons": ["trippoint.deleted"],
                "userId": null,
                "uuid": "6aa5b2f9-4f25-461c-84cd-baee012209ac",
                "revision": 0,
                "time": 1685102081926,
                "forwardedFrom": null,
                "resourceType": "TripPoint",
                "updateType": null
            },
            "uuid": "08a12a58-8dcb-41ad-852b-8fe74d405489",
            "sequenceId": null,
            "isDisconnected": false,
            "isOutOfTrack": false,
            "routeDeviationMinimumDistanceConstraint": null,
            "eta": null,
            "routeId": null,
            "expectedActivityStartTime": null,
            "actualDeparture": null,
            "vehicleId": "9499424304",
            "place": null,
            "remainingDistance": 0,
            "actualActivityStartTime": null,
            "forShipmentStages": ["08a12a58-8dcb-41ad-852b-8fe74d405489"],
            "actualActivityEndTime": null,
            "actualArrival": null,
            "purposedDistance": null,
            "plannedDeparture": null,
            "currentLocation": null,
            "isAutoCompleted": false,
            "coveredDistance": null,
            "hub": {
                "hubId": null,
                "boundary": [
                    [
                        [77.71416598607003, 13.023347228070612],
                        [77.71561515086535, 13.023503900045272],
                        [77.71498181217703, 13.021529825923102],
                        [77.71416598607003, 13.023347228070612]
                    ]
                ],
                "address": null,
                "accessibility": "private",
                "addedBy": "495b8728-c761-4fa7-83fe-db75a7d63221",
                "center": {
                    "latitude": 13.0229320455274,
                    "longitude": 77.71473223379562
                },
                "suggestedRadius": 0,
                "isOwned": null,
                "centerCoordinates": [77.71473223379562, 13.0229320455274],
                "placeId": "d1058b8d-00ad-4914-a4c7-e6fd11498f9b",
                "geoJsonBoundry": null,
                "externalId": null,
                "source": "GOOGLE",
                "places": [{
                    "hubId": "d1058b8d-00ad-4914-a4c7-e6fd11498f9b",
                    "boundary": null,
                    "address": "Old Madras Rd, Thambu Chetty Palya, Krishnarajapura, Bengaluru, Karnataka 560049, India",
                    "accessibility": "public",
                    "addedBy": "495b8728-c761-4fa7-83fe-db75a7d63221",
                    "center": {
                        "latitude": 13.022664,
                        "longitude": 77.714852
                    },
                    "suggestedRadius": 0,
                    "isOwned": false,
                    "centerCoordinates": [77.714852, 13.022664],
                    "placeId": "8ba8b9d0-26bf-407f-9ced-c5642eebee6b",
                    "geoJsonBoundry": {
                        "coordinates": [
                            [
                                [77.71459392087387, 13.023335438329987],
                                [77.71564028716975, 13.023439981667213],
                                [77.71473880236098, 13.021720238163407],
                                [77.71459392087387, 13.023335438329987]
                            ]
                        ],
                        "type": "Polygon"
                    },
                    "externalId": null,
                    "source": "FRETRON",
                    "places": null,
                    "viewport": null,
                    "district": null,
                    "name": "k r puram",
                    "state": null,
                    "category": "Others",
                    "subDistrict": null,
                    "controllingBranchId": null
                }],
                "viewport": null,
                "district": "Bangalore Urban",
                "name": "K R Puram",
                "state": "Karnataka",
                "category": "Hub",
                "subDistrict": null,
                "controllingBranchId": null
            },
            "imei": "9499424304",
            "assosiatedShipmentsId": ["0671f58d-55de-43bc-b48d-d82579c7e49f"],
            "status": "UPCOMING"
        },
        "place": null,
        "controllingBranchId": null,
        "gateOutTime": null,
        "status": "UPCOMING"
    }],
    "remarks": null,
    "syncUpExpiryTime": null,
    "shipmentStatus": "Planned"
}

async function updateTrackingMode(payload) {
    try {

    } catch (error) {

    }
}

async function main(shipment) {
    try {
        // If Shipment stages[0].status === "COMPLETED" && shipment.trackingStatus === "Enroute for Delivery" then only map the payload
        const payload = await updateTrackingMode()
        if (shipment.stages[0].status === "COMPLETED" && shipment.trackingStatus === "Enroute for Delivery") {
            const mapPayload = shipment.payload.map((item) => item);
            console.log(mapPayload);
        }
    } catch (error) {
        console.log(`Some error mapping payload - ${error.message}`)
    }
}

try {
    await main($event)
} catch (error) {
    console.log(`Error executing automation- ${error.message}`)
}